<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://api-maps.yandex.ru/v3/?apikey=eb113ae6-5c13-4a01-8fb0-91b72bf0c0a0&lang=ru_RU"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <link href="../styles/light-theme/style-main.css" rel="stylesheet">
  <title>Отчеты</title>
</head>
<body class="content">
  <nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Konsyst</a>
      <div class="d-flex align-items-center justify-content-between" style="width: 88%;">
        <div class="d-flex align-items-center">
          <div class="pagename me-5">Мероприятия</div>
          <form class="d-flex">
            <input class="searchinpt form-control me-5" type="search" placeholder="Поиск" aria-label="Search">
          </form>
          <button class="btn filters me-5 justify-content-center" type="button">
						<img class="me-1" src="../assets/icons/filters.svg" alt="Filters">
            <span>Фильтры</span>
          </button>
          <div class="d-flex align-items-center me-2">
						<img src="../assets/icons/users.svg" alt="Users" onclick="showUserListModal()" style="cursor: pointer;">
            <span class="users ms-2" id="usercount">145</span>
          </div>
        </div>
        <div class="d-flex align-items-center">
          <div class="d-flex align-items-center me-3">
						<img src="../assets/icons/notifications.svg" alt="Notifications">
          </div>
          <div class="user d-flex align-items-center me-2">
						<div id="useravatar" class="me-2 d-flex justify-content-center align-items-center">
							<span id="profile-name-avatar"></span>
						</div>
            <span id="profile-name"></span>
          </div>
        </div>
      </div>
    </div>
  </nav>

	<div class="drawer">
		<div class="d-flex flex-column mt-5">
			<button class="btn drawerbtns mb-2 d-flex align-items-center" onclick="addEvent()">
				<img class="drawericons me-3" src="../assets/icons/events.svg" alt="Events">
				<span>Мероприятия</span>
			</button>
			<button class="btn drawerbtns mb-2 d-flex align-items-center" onclick="toggleDarkTheme()">
				<img class="drawericons me-3" src="../assets/icons/archive.svg" alt="Archive">
				<span>Архив</span>
			</button>
			<button class="btn drawerbtns mb-2 d-flex align-items-center" onclick="toggleDarkTheme()">
				<img class="drawericons me-3" src="../assets/icons/settings.svg" alt="Settings">
				<span>Настройки</span>
			</button>
			<button class="btn drawerbtns mb-2 d-flex align-items-center" onclick="toggleDarkTheme()">
				<img class="drawericons me-3" src="../assets/icons/superadmin.svg" alt="SuperAdmin">
				<span>Супер-админ</span>
			</button>
			<button class="btn drawerbtns mb-2 d-flex align-items-center" onclick="toggleDarkTheme()">
				<img class="drawericons me-3" src="../assets/icons/darkswitch.svg" alt="DarkTheme">
				<span>Темная тема</span>
			</button>
			<button class="btn drawerbtns mb-2 d-flex align-items-center" onclick="showAddUser()">
				<img class="drawericons me-3" src="../assets/icons/users.svg" alt="DarkTheme">
				<span>Добавить юзера</span>
			</button>
			<button class="btn drawerbtns mb-2 d-flex align-items-center" onclick="showAddGroup()">
				<img class="drawericons me-3" src="../assets/icons/groups.svg" alt="DarkTheme">
				<span>Добавить группу</span>
			</button>
		</div>
	</div>

	<div class="container-fluid mt-5 d-flex flex-column flex-md-row events mb-5">
		<div class="event flex-grow-1 me-md-3 mb-3 mb-md-0">
			<h4 class="eventtitle p-3">
				Проверить что-то
				<img class="eventsettings" src="../assets/icons/eventmore.svg" alt="EventMore" id="eventmore">
			</h4>
			<div class="scenario p-3 m-3 mb-4">
				<h6 class="title">Занятие в МАОУ гимназии №40</h6>
				<div class="info mt-2 d-flex flex-wrap">
					<div class="dates-container d-flex me-3">
						<img class="me-1 time" alt="Time">
						<span class="date">24 мар, 9:00</span>
					</div>
					<div class="comments-container d-flex me-3">
						<img class="me-1 comments" alt="Comments">
						<span class="comment">4</span>
					</div>
					<div class="attachments-container d-flex">
						<img class="me-1 attachment" alt="Attachments">
						<span class="attachment">2</span>
					</div>
				</div>
				<div class="users mt-2 d-flex">
					<div class="useravatars me-2 d-flex justify-content-center align-items-center">
						<span class="useravatitle">АЕ</span>
					</div>
					<!-- Additional user avatars -->
				</div>
			</div>
			<div class="d-flex justify-content-center mb-3">
				<button class="btn adds">
					<span>
						<img class="addicon me-1" src="../assets/icons/add.svg" alt="Add scenario">
						<span class="addtext">Добавить сценарий</span>
					</span>
				</button>
			</div>
		</div>
		<div class="event flex-grow-1 me-md-3 mb-3 mb-md-0">
			<h4 class="eventtitle p-3">
				Проверить что-то
				<img class="eventsettings" src="../assets/icons/eventmore.svg" alt="EventMore">
			</h4>
			<div class="d-flex justify-content-center mb-3">
				<button class="btn adds">
					<span>
						<img class="addicon me-1" src="../assets/icons/add.svg" alt="Add scenario">
						<span class="addtext">Добавить сценарий</span>
					</span>
				</button>
			</div>
		</div>
		<div class="event flex-grow-1 me-md-3 mb-3 mb-md-0">
			<div class="d-flex justify-content-center">
				<button class="btn" onclick="showAddEvent()">
					<span>
						<img class="addicon me-1" src="../assets/icons/add.svg" alt="Add scenario">
						<span class="addtext">Добавить мероприятие</span>
					</span>
				</button>
			</div>
		</div>
	</div>

	 <!-- Modal -->
	 <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header col-11 mx-auto mt-2">
					<img src="../assets/icons/edit.svg" class="me-2">
          <h5 class="modal-title" id="myModalLabel">Редактирование сценария</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
				<div class="modal-body mt-5 mx-auto col-11 ">
					<div class="row">
						<div class="col-auto">
							<img src="../assets/icons/scenario.svg" style="width: 20px; height: 20px;" alt="Desc">
						</div>
						<div class="col">
							<div id="scenariotitle" class="h5 me-3">Название сценария</div>
						</div>
						<div class="col-auto ms-auto">
							<button id="editBtn" class="btn btn-primary" onclick="editScenarioTitle()">Изменить</button>
						</div>
					</div>
					<div class="row">
						<div class="col">Исполнитель
							<div class="users mt-2 d-flex" id="usersScenarioAdd">
								<button class="useravatars me-2 d-flex justify-content-center align-items-center" id="adduserintoscenario" onclick="showUserListModal3()">
									<img src="../assets/icons/add.svg">
								</button>
								<!-- Additional user avatars -->
							</div>
						</div>
						<div class="col">Срок
							<div class="dropdown">
								<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownDate" data-bs-toggle="dropdown" aria-expanded="false">
									Дата и время
								</button>
								<ul class="dropdown-menu" aria-labelledby="dropdownDate">
									<li>
										<div class="p-3">
											<div class="datepicker-container">
												<div id="datepicker"></div>
											</div>
										</div>
									</li>
									<li>
										<div class="p-3">
											<select class="form-select" id="time-picker">
											</select>
										</div>
									</li>
								</ul>
							</div>
						</div>
						<div class="col">Тип задания
							<div class="dropdown">
								<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownType" data-bs-toggle="dropdown" aria-expanded="false">
									Образование
								</button>
								<ul class="dropdown-menu" aria-labelledby="dropdownType">
									<li>Образование</li>
									<li>Тестовое</li>
									<li>Тестовое</li>
									<li>Тестовое</li>
									<li>Тестовое</li>
								</ul>
							</div>
						</div>
					</div>
					<hr>
					<div class="row">
						<div class="col-auto">
							<img src="../assets/icons/description.svg" style="width: 20px; height: 20px;" alt="Desc">
						</div>
						<div class="col">
							<h5>Описание</h5>
						</div>
						<div class="col-auto ms-auto">
							<button class="btn btn-primary" onclick="editScenarioDescription()">Изменить</button>
						</div>
					</div>
					<p id="scenariodescription">Описание сценария</p>
					<hr>
					<div class="row">
						<div class="col-auto">
							<img src="../assets/icons/steps.svg" style="width: 20px; height: 20px;" alt="Desc">
						</div>
						<div class="col">
							<h5>Шаги</h5>
							<div class="row steps">
							</div>
						</div>
						<div class="col-auto ms-auto">
							<button class="btn btn-primary" onclick="createStep()">Создать шаг</button>
						</div>
					</div>
					<hr>
					<div class="row">
						<div class="col-auto">
							<img src="../assets/icons/geolocation.svg" style="width: 20px; height: 20px;" alt="Desc">
						</div>
						<div class="col">
							<h5>Геоточка</h5>
						</div>
						<div class="col-auto ms-auto">
							<button class="btn btn-primary" id="geolocationbtn">Добавить геоточку</button>
						</div>
					</div>
					<div id="map" style="width: 450px; height: 400px;" class="mx-auto col-12"></div> 
					<hr>
					<div class="row">
						<div class="col-auto">
							<img src="../assets/icons/description.svg" style="width: 20px; height: 20px;" alt="Desc">
						</div>
						<div class="col">
							<h5>Действия</h5>
						</div>
						<div class="col-auto ms-auto">
							<button class="btn btn-primary">Подробнее</button>
						</div>
					</div>
				</div>
				<div class="modal-footer mb-3 col-11 mx-auto">
					<button class="btn btn-secondary col-12" id="saveeditscenario" onclick="saveEditScenario()" >Сохранить изменения</button>
				</div>
      </div>
    </div>
  </div>
	<div class="modal fade" id="chooseModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="myModalLabel">Выберите действие:</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body"> 
          <button class="btn btn-secondary">Посмотреть отчеты сценария</button>
					<button class="btn btn-secondary">Редактировать сценарий</button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
        </div>
      </div>
    </div>
  </div>
	<div class="modal fade" id="addEvent" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="myModalLabel">Создать мероприятие</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form id="eventForm">
						<div class="mb-3">
							<label for="eventName" class="form-label">Название мероприятия</label>
							<input type="text" class="form-control" id="eventName" aria-describedby="eventNameHelp">
						</div>
						<div class="mb-3">
							<label for="userNickname" class="form-label">Выберите пользователя</label>
							<div class="input-group">
								<input type="text" class="form-control" id="userNickname" aria-describedby="userNicknameHelp" readonly>
								<button class="btn btn-outline-secondary" type="button" id="userNicknameBtn">
									<i class="bi bi-chevron-down"></i>
								</button>
							</div>
							<div class="user-list list-group" id="userList"></div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="createEventBtn">Создать</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="addUser" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="myModalLabel">Добавить пользователя</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
					<form>
						<div class="mb-3">
							<label for="exampleInputEmail1" class="form-label">ФИО</label>
							<input type="email" class="form-control" id="fio" aria-describedby="emailHelp">
							<label for="exampleInputEmail1" class="form-label">Никнейм</label>
							<input type="email" class="form-control" id="nickname" aria-describedby="emailHelp">
						</div>
					</form>
					<div class="dropdown">
						<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownType" data-bs-toggle="dropdown" aria-expanded="false">
							Исполнитель
						</button>
						<ul class="dropdown-menu" aria-labelledby="dropdownType">
							<li><a href="#" class="dropdown-item" data-value="Исполнитель">Исполнитель</a></li>
							<li><a href="#" class="dropdown-item" data-value="Админ">Админ</a></li>
						</ul>
					</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="createUser()">Создать</button>
        </div>
      </div>
    </div>
  </div>
	<div class="modal fade" id="addGroup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="myModalLabel">Добавить пользователя</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
				<div class="modal-body">
					<form>
						<div class="mb-3">
							<label for="exampleInputEmail1" class="form-label">Название группы</label>
							<input type="email" class="form-control" id="groupname" aria-describedby="emailHelp">
						</div>
						<div class="mb-3">
							<label for="selectedUsers" class="form-label">Выбранные пользователи</label>
							<ul id="selectedUsers" class="list-group">
								<li class="list-group-item d-flex justify-content-between align-items-center">
									User Name
									<button class="btn btn-sm btn-danger remove-user" data-user-id="1">
										<i class="bi bi-trash"></i>
									</button>
								</li>
							</ul>
						</div>
					</form>
					<button class="btn btn-primary" onclick="showUserListModal2()">Выбрать пользователей</button>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="createUserGroup()">Создать</button>
				</div>
      </div>
    </div>
  </div>
	<div class="modal fade" id="repotsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl"  role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="reportTitle">Отчеты по сценарию:</h5>
          <h5 class="modal-title" id="scenarioRepTitle"></h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
					<h2 class="userreport"></h2>
					<div class="col mt-2">
						<h6>Шаги</h6>
						<div class="row">
						<div class="row stepsReport">
							<div class="col-md-6 mt-3 step">
								<div class="card" id="step1">
									<div class="card-body">
										<h5 class="card-title stepTitle"></h5>
										<h6 class="card-subtitle mb-2 text-muted stepsNames"></h6>
										<div class="d-flex justify-content-between align-items-center">
											<div class="d-flex align-items-center">
												<img src="../assets/icons/photo.svg" style="width: 20px; height: 20px;" class="me-2">
												Фото
											</div>
										</div>
										<div class="row" id="photos">
										</div>
										<div class="d-flex justify-content-between align-items-center">
											<div class="d-flex">
												<img src="../assets/icons/video.svg" style="width: 20px; height: 20px;" class="me-2">
												Видео
											</div>
										</div>
										<div class="row" id="videos">
										</div>
									</div>
									<div class="card-footer d-flex">
										<h6 class="me-3">Комментарий:</h6>
										<h5 class="commentText"></h5>
									</div>
								</div>
							</div>
					</div>
					
					</div>
					</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
        </div>
      </div>
    </div>
  </div>
	<div class="modal fade" id="userListModal" tabindex="-1" role="dialog" aria-labelledby="userListModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="userListModalLabel">Список пользователей</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="user-list list-group" id="userListContent"></div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="photo-modal" tabindex="-2" role="dialog" aria-hidden="true" style="transform: rotate(90deg);">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-body d-flex justify-content-center align-items-center">
					<img class="img-fluid" id="modal-photo" src="" style="max-height: 90vh; object-fit: contain;">
				</div>
			</div>
		</div>
	</div>
	

  <script defer src="../scripts/main/script.js"></script>
</body>
</html>
